function initPage(){initRating()}function initRating(){lib.each(lib.queryElementsBySelector("ul.star-rating"),function(){new StarRating({element:this,onselect:function(){}})})}function StarRating(){this.options={activeClass:"active",settedClass:"setted",element:null,items:null,onselect:null},this.init.apply(this,arguments)}StarRating.prototype={init:function(t){this.setOptions(t),this.element&&(this.getElements(),this.addEvents())},setOptions:function(t){for(var e in t)t.hasOwnProperty(e)&&(this.options[e]=t[e]);this.options.element&&(this.element=this.options.element)},getElements:function(){null===this.options.items?this.items=this.element.children:"string"==typeof this.options.items?this.items=this.element.getElementsByTagName(this.options.items):"object"==typeof this.options.items&&(this.items=this.options.items);for(var t=0;t<this.items.length;t++)lib.hasClass(this.items[t],this.options.activeClass)&&(this.activeIndex=t),lib.hasClass(this.items[t],this.options.settedClass)&&(this.settedIndex=t)},addEvents:function(){for(var t=0;t<this.items.length;t++)this.items[t].onmouseover=lib.bind(this.overHandler,this,t),this.items[t].onmouseout=lib.bind(this.outHandler,this,t),this.items[t].onclick=lib.bind(this.clickHandler,this,t)},overHandler:function(t){this.hovering=!0,this.hoverIndex=t,this.refreshClasses()},outHandler:function(){this.hovering=!1,this.refreshClasses()},clickHandler:function(t){return this.hovering=!1,this.settedIndex=t,"function"==typeof this.options.onselect&&this.options.onselect(t),this.refreshClasses(),!1},refreshClasses:function(){for(var t=0;t<this.items.length;t++)lib.removeClass(this.items[t],this.options.activeClass),lib.removeClass(this.items[t],this.options.settedClass);this.hovering?lib.addClass(this.items[this.hoverIndex],this.options.activeClass):"number"==typeof this.settedIndex?lib.addClass(this.items[this.settedIndex],this.options.settedClass):"number"==typeof this.activeIndex&&lib.addClass(this.items[this.activeIndex],this.options.activeClass)}},lib={hasClass:function(t,e){return t&&t.className?t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)")):!1},addClass:function(t,e){t&&!this.hasClass(t,e)&&(t.className+=" "+e)},removeClass:function(t,e){t&&this.hasClass(t,e)&&(t.className=t.className.replace(new RegExp("(\\s|^)"+e+"(\\s|$)")," "))},extend:function(t){for(var e=1;e<arguments.length;e++)for(var i in arguments[e])arguments[e].hasOwnProperty(i)&&(t[i]=arguments[e][i]);return t},each:function(t,e){var i,n;if("number"==typeof t.length)for(i=0,n=t.length;n>i&&e.call(t[i],i,t[i])!==!1;i++);else for(i in t)if(t.hasOwnProperty(i)&&e.call(t[i],i,t[i])===!1)break},event:function(){var t=function(t){return t=t||window.event,t.isFixed?t:(t.isFixed=!0,t.target||(t.target=t.srcElement),t.preventDefault=t.preventDefault||function(){this.returnValue=!1},t.stopPropagation=t.stopPropagaton||function(){this.cancelBubble=!0},t)};return{add:function(e,i,n){e.events||(e.events={},e.handle=function(i){var n,s=e.events[i.type];i=t(i);for(var o=0,r=s.length;r>o;o++)s[o]&&(n=s[o].call(e,i),n===!1&&(i.preventDefault(),i.stopPropagaton()))}),e.events[i]||(e.events[i]=[],e.addEventListener?e.addEventListener(i,e.handle,!1):e.attachEvent&&e.attachEvent("on"+i,e.handle)),e.events[i].push(n)},remove:function(t,e,i){for(var n=t.events[e],s=n.length-1;s>=0;s--)n[s]===i&&n.splice(s,1);n.length||(delete t.events[e],t.removeEventListener?t.removeEventListener(e,t.handle,!1):t.detachEvent&&t.detachEvent("on"+e,t.handle))}}}(),queryElementsBySelector:function(t,e){if(e=e||document,!t)return[];if(">*"===t)return e.children;if("function"==typeof document.querySelectorAll)return e.querySelectorAll(t);for(var i=t.split(","),n=[],s=0;s<i.length;s++){for(var o=[e||document],r=i[s].replace(/^\s+/,"").replace(/\s+$/,"").split(" "),a=0;a<r.length;a++)if(token=r[a].replace(/^\s+/,"").replace(/\s+$/,""),token.indexOf("#")>-1){var l=token.split("#"),c=l[0],h=l[1],u=document.getElementById(h);if(u&&c&&u.nodeName.toLowerCase()!=c)return[];o=u?[u]:[]}else if(token.indexOf(".")>-1){for(var l=token.split("."),c=l[0]||"*",p=l[1],d=[],f=0,g=0;g<o.length;g++){var m;m="*"==c?o[g].getElementsByTagName("*"):o[g].getElementsByTagName(c);for(var v=0;v<m.length;v++)d[f++]=m[v]}o=[];for(var y=0,b=0;b<d.length;b++)d[b].className&&d[b].className.match(new RegExp("(\\s|^)"+p+"(\\s|$)"))&&(o[y++]=d[b])}else if(token.match(/^(\w*)\[(\w+)([=~\|\^\$\*]?)=?"?([^\]"]*)"?\]$/)){var c=RegExp.$1||"*",w=RegExp.$2,x=RegExp.$3,C=RegExp.$4;"for"==w.toLowerCase()&&this.browser.msie&&this.browser.version<8&&(w="htmlFor");for(var d=[],f=0,g=0;g<o.length;g++){var m;m="*"==c?o[g].getElementsByTagName("*"):o[g].getElementsByTagName(c);for(var v=0;m[v];v++)d[f++]=m[v]}o=[];var T,y=0;switch(x){case"=":T=function(t){return t.getAttribute(w)==C};break;case"~":T=function(t){return t.getAttribute(w).match(new RegExp("(\\s|^)"+C+"(\\s|$)"))};break;case"|":T=function(t){return t.getAttribute(w).match(new RegExp("^"+C+"-?"))};break;case"^":T=function(t){return 0==t.getAttribute(w).indexOf(C)};break;case"$":T=function(t){return t.getAttribute(w).lastIndexOf(C)==t.getAttribute(w).length-C.length};break;case"*":T=function(t){return t.getAttribute(w).indexOf(C)>-1};break;default:T=function(t){return t.getAttribute(w)}}o=[];for(var y=0,b=0;b<d.length;b++)T(d[b])&&(o[y++]=d[b])}else{c=token;for(var d=[],f=0,g=0;g<o.length;g++)for(var m=o[g].getElementsByTagName(c),v=0;v<m.length;v++)d[f++]=m[v];o=d}n=[].concat(n,o)}return n},trim:function(t){return t.replace(/^\s+/,"").replace(/\s+$/,"")},bind:function(t,e,i){return function(){return t.apply(e,"undefined"!=typeof i?[i]:arguments)}}},window.addEventListener?window.addEventListener("load",initPage,!1):window.attachEvent&&window.attachEvent("onload",initPage);
