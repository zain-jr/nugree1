!function(t,e){function i(e,i,n){var a;document.body&&(i="number"==typeof i?{duration:i}:i||{},s=s||t("html, body"),a=i.container||s,"number"==typeof e&&(e={top:e}),o&&r&&o.off(l,r),i.wheelBehavior&&"none"!==i.wheelBehavior&&(r=function(t){"stop"===i.wheelBehavior?(a.off(l,r),a.stop()):"ignore"===i.wheelBehavior&&t.preventDefault()},o=a.on(l,r)),a.stop().animate({scrollLeft:e.left,scrollTop:e.top},i.duration,function(){r&&a.off(l,r),t.isFunction(n)&&n()}))}function n(e){this.options=t.extend({anchorLinks:'a[href^="#"]',container:null,extraOffset:null,activeClasses:null,easing:"swing",animMode:"duration",animDuration:800,animSpeed:1500,anchorActiveClass:"anchor-active",sectionActiveClass:"section-active",wheelBehavior:"stop",useNativeAnchorScrolling:!1},e),this.init()}var s,o,r,a=t(window),l="onwheel"in document||document.documentMode>=9?"wheel":"mousewheel DOMMouseScroll";n.prototype={init:function(){this.initStructure(),this.attachEvents()},initStructure:function(){this.container=t(this.options.container?this.options.container:"html,body"),this.scrollContainer=this.options.container?this.container:a,this.anchorLinks=t(this.options.anchorLinks)},getAnchorTarget:function(e){var i=t(e).attr("href");return t(i.length>1?i:"html")},getTargetOffset:function(t){var e=t.offset().top;return this.options.container&&(e-=this.container.offset().top-this.container.prop("scrollTop")),"number"==typeof this.options.extraOffset?e-=this.options.extraOffset:"function"==typeof this.options.extraOffset&&(e-=this.options.extraOffset(t)),{top:e}},attachEvents:function(){var e=this;this.options.activeClasses&&(this.anchorData=[],this.anchorLinks.each(function(){var i,n=jQuery(this),s=e.getAnchorTarget(n);t.each(e.anchorData,function(t,e){e.block[0]===s[0]&&(i=e)}),i?i.link=i.link.add(n):e.anchorData.push({link:n,block:s})}),this.resizeHandler=function(){e.recalculateOffsets()},this.scrollHandler=function(){e.refreshActiveClass()},this.recalculateOffsets(),this.scrollContainer.on("scroll",this.scrollHandler),a.on("resize",this.resizeHandler)),this.clickHandler=function(t){e.onClick(t)},this.options.useNativeAnchorScrolling||this.anchorLinks.on("click",this.clickHandler)},recalculateOffsets:function(){var e=this;t.each(this.anchorData,function(t,i){i.offset=e.getTargetOffset(i.block),i.height=i.block.outerHeight()}),this.refreshActiveClass()},refreshActiveClass:function(){function e(t,e,n){t.toggleClass(i.options.anchorActiveClass,n),e.toggleClass(i.options.sectionActiveClass,n)}var i=this,n=!1,s=this.container.prop("scrollHeight"),o=this.scrollContainer.height(),r=this.options.container?this.container.prop("scrollTop"):a.scrollTop();return this.options.customScrollHandler?void this.options.customScrollHandler.call(this,r,this.anchorData):(this.anchorData.sort(function(t,e){return t.offset.top-e.offset.top}),void t.each(this.anchorData,function(t){var a=i.anchorData.length-t-1,l=i.anchorData[a],c="parent"===i.options.activeClasses?l.link.parent():l.link;r>=s-o?a===i.anchorData.length-1?e(c,l.block,!0):e(c,l.block,!1):!n&&(r>=l.offset.top-1||0===a)?(n=!0,e(c,l.block,!0)):e(c,l.block,!1)}))},calculateScrollDuration:function(t){var e;return"speed"===this.options.animMode?(e=Math.abs(this.scrollContainer.scrollTop()-t.top),e/this.options.animSpeed*1e3):this.options.animDuration},onClick:function(t){var e=this.getAnchorTarget(t.currentTarget),n=this.getTargetOffset(e);t.preventDefault(),i(n,{container:this.container,wheelBehavior:this.options.wheelBehavior,duration:this.calculateScrollDuration(n)})},destroy:function(){this.options.activeClasses&&(a.off("resize",this.resizeHandler),this.scrollContainer.off("scroll",this.scrollHandler)),this.anchorLinks.off("click",this.clickHandler)}},t.extend(n,{scrollTo:function(t,e,n){i(t,e,n)}}),e.SmoothScroll=n}(jQuery,this);
