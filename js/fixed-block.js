!function(t,e){"use strict";function i(e){this.options=t.extend({fixedActiveClass:"fixed-position",slideBlock:"[data-scroll-block]",positionType:"auto",fixedOnlyIfFits:!0,container:null,animDelay:100,animSpeed:200,extraBottom:0,extraTop:0},e),this.initStructure(),this.attachEvents()}var n="ontouchstart"in e||e.DocumentTouch&&document instanceof DocumentTouch||/Windows Phone/.test(navigator.userAgent);i.prototype={initStructure:function(){this.win=t(e),this.container=t(this.options.container),this.slideBlock=this.container.find(this.options.slideBlock),"auto"===this.options.positionType&&(this.options.positionType=n?"absolute":"fixed")},attachEvents:function(){var t=this;this.onResize=function(){t.resizeHandler()},this.onScroll=function(){t.scrollHandler()},this.win.on({resize:this.onResize,scroll:this.onScroll}),this.resizeHandler()},recalculateOffsets:function(){var t=this.slideBlock.offset(),e=this.slideBlock.position(),i=this.container.offset();this.win.height();this.data={windowHeight:this.win.height(),windowWidth:this.win.width(),blockPositionLeft:e.left,blockPositionTop:e.top,blockOffsetLeft:t.left,blockOffsetTop:t.top,blockHeight:this.slideBlock.innerHeight(),holderOffsetLeft:i.left,holderOffsetTop:i.top,holderHeight:this.container.innerHeight()}},isVisible:function(){return this.slideBlock.prop("offsetHeight")},fitsInViewport:function(){return this.options.fixedOnlyIfFits&&this.data?this.data.blockHeight+this.options.extraTop<=this.data.windowHeight:!0},resizeHandler:function(){this.isVisible()&&(i.stickyMethods[this.options.positionType].onResize.apply(this,arguments),this.scrollHandler())},scrollHandler:function(){if(this.isVisible()){if(!this.data)return void this.resizeHandler();this.currentScrollTop=this.win.scrollTop(),this.currentScrollLeft=this.win.scrollLeft(),i.stickyMethods[this.options.positionType].onScroll.apply(this,arguments)}},refresh:function(){this.data&&(this.data.holderHeight=this.container.innerHeight(),this.data.blockHeight=this.slideBlock.innerHeight(),this.scrollHandler())},destroy:function(){this.slideBlock.removeAttr("style").removeClass(this.options.fixedActiveClass),this.win.off({resize:this.onResize,scroll:this.onScroll})}},i.stickyMethods={fixed:{onResize:function(){this.slideBlock.removeAttr("style"),this.recalculateOffsets()},onScroll:function(){this.fitsInViewport()&&this.currentScrollTop+this.options.extraTop>this.data.blockOffsetTop?(this.currentScrollTop+this.options.extraTop+this.data.blockHeight>this.data.holderOffsetTop+this.data.holderHeight-this.options.extraBottom?this.slideBlock.css({position:"absolute",top:this.data.blockPositionTop+this.data.holderHeight-this.data.blockHeight-this.options.extraBottom-(this.data.blockOffsetTop-this.data.holderOffsetTop),left:this.data.blockPositionLeft}):this.slideBlock.css({position:"fixed",top:this.options.extraTop,left:this.data.blockOffsetLeft-this.currentScrollLeft}),this.slideBlock.addClass(this.options.fixedActiveClass)):this.slideBlock.removeClass(this.options.fixedActiveClass).removeAttr("style")}},absolute:{onResize:function(){this.slideBlock.removeAttr("style"),this.recalculateOffsets(),this.slideBlock.css({position:"absolute",top:this.data.blockPositionTop,left:this.data.blockPositionLeft}),this.slideBlock.addClass(this.options.fixedActiveClass)},onScroll:function(){var t=this;clearTimeout(this.animTimer),this.animTimer=setTimeout(function(){var e=t.currentScrollTop+t.options.extraTop,i=t.data.blockPositionTop-(t.data.blockOffsetTop-t.data.holderOffsetTop),n=t.data.holderHeight-t.data.blockHeight-t.options.extraBottom,s=i+Math.min(e-t.data.holderOffsetTop,n),o=t.fitsInViewport()&&e>t.data.blockOffsetTop?s:t.data.blockPositionTop;t.slideBlock.stop().animate({top:o},t.options.animSpeed)},this.options.animDelay)}}},t.fn.fixedScrollBlock=function(e){return this.each(function(){var n=t.extend({},e,{container:this}),s=new i(n);t.data(this,"FixedScrollBlock",s)})},e.FixedScrollBlock=i}(jQuery,this);
